<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Hone your skills! Beat Voldemort!">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Game of Thrones - Littlefinger</title>
    <style>
      .blue { background-color: #3c78d8; }
      .red { background-color: #e06666; }
      div:not(#div-wrapper) {
        padding: 20px 0;
        width: 60px;
        border: 2px solid #333;
        border-radius: 4px;
        display: inline-block;
        margin: 4px;
        text-align: center;
        color: white;
        margin-top: -30px;
      }
      div.control {  background-color: #777; cursor: pointer; }
      div.control, div.info {
        padding: 0px !important;
        margin-top: 0px !important;
        height: 60px;
      }
      h1 {
        color: white;
        display: inline-block;
        padding: 0 20px;
        font-family: Menlo, monospace;
      }
    </style>
  </head>
  <body>
    <form>
      Squadron Member 1
      <input type="number" name="str1" placeholder="Strength?" value=0>
      <input type="number" name="mnd1" placeholder="Mind?" value=0>
      <input type="number" name="tac1" placeholder="Tactics?" value=0>
    </form>
    <form>
      Squadron Member 2
      <input type="number" name="str2" placeholder="Strength?" value=0>
      <input type="number" name="mnd2" placeholder="Mind?" value=0>
      <input type="number" name="tac2" placeholder="Tactics?" value=0>
    </form>
    <form>
      Squadron Member 3
      <input type="number" name="str3" placeholder="Strength?" value=0>
      <input type="number" name="mnd3" placeholder="Mind?" value=0>
      <input type="number" name="tac3" placeholder="Tactics?" value=0>
    </form>
    <form>
      Squadron Member 4
      <input type="number" name="str4" placeholder="Strength?" value=0>
      <input type="number" name="mnd4" placeholder="Mind?" value=0>
      <input type="number" name="tac4" placeholder="Tactics?" value=0>
    </form>
    <form>
      Squadron Member 5
      <input type="number" name="str5" placeholder="Strength?" value=0>
      <input type="number" name="mnd5" placeholder="Mind?" value=0>
      <input type="number" name="tac5" placeholder="Tactics?" value=0>
    </form>
    <form>
      Squadron Member 6
      <input type="number" name="str6" placeholder="Strength?" value=0>
      <input type="number" name="mnd6" placeholder="Mind?" value=0>
      <input type="number" name="tac6" placeholder="Tactics?" value=0>
    </form>
    <form>
      Squadron Member 7
      <input type="number" name="str7" placeholder="Strength?" value=0>
      <input type="number" name="mnd7" placeholder="Mind?" value=0>
      <input type="number" name="tac7" placeholder="Tactics?" value=0>
    </form>
    <form>
      Squadron Member 8
      <input type="number" name="str8" placeholder="Strength?" value=0>
      <input type="number" name="mnd8" placeholder="Mind?" value=0>
      <input type="number" name="tac8" placeholder="Tactics?" value=0>
    </form>
    <form>
      Current Regiment (3 numbers should add to 200... don't support anything else yet...)
    </form>
    <form>
      <input type="number" name="regstr" placeholder="Strength?" value=0>
      <input type="number" name="regmnd" placeholder="Mind?" value=0>
      <input type="number" name="regtac" placeholder="Tactics?" value=0>
    </form>
    <form>
      Goal str/mnd/tac
      <input type="number" name="goalstr" placeholder="Strength?" value=0>
      <input type="number" name="goalmnd" placeholder="Mind?" value=0>
      <input type="number" name="goaltac" placeholder="Tactics?" value=0>
    </form>
    <form>
      <button>SOLVE!</button>
    <div id="div-wrapper">
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>
      var str1;
      var str2;
      var str3;
      var str4;
      var str5;
      var str6;
      var str7;
      var str8;
      var mnd1;
      var mnd2;
      var mnd3;
      var mnd4;
      var mnd5;
      var mnd6;
      var mnd7;
      var mnd8;
      var tac1;
      var tac2;
      var tac3;
      var tac4;
      var tac5;
      var tac6;
      var tac7;
      var tac8;

      function move(e) {
        var r = $(e.currentTarget).data('row');
        var c = $(e.currentTarget).data('col');
        var color = $(e.currentTarget).data('color');
        var $up = $('#' + (r - 1) + '-' + c);
        console.log($up);
        var $down = $('#' + (r + 1) + '-' + c);
        console.log($down);
        var $left = $('#' + r + '-' + (c - 1));
        console.log($left);
        var $right = $('#' + r + '-' + (c + 1));
        console.log($right);
        var $neighbors = [$up, $down, $left, $right];
        if(color == 'green') {
          $(e.currentTarget).toggleClass('green red').data('color', 'red');
          reds++;
          greens--;
          $neighbors.forEach(function($elem, i, array) {
            console.log($elem[0]);
            if($elem[0]) {
              console.log($elem.data('color'));
              if($elem.data('color') == 'green') {
                $elem.toggleClass('green blue').data('color', 'blue');
                if(greens > 0) { greens--; }
                blues++;
                } else if($elem.data('color') == 'blue') {
                $elem.toggleClass('blue green').data('color', 'green');
                if (blues > 0 ) { blues--; }
                console.log('blue: ' + blues)
                greens++;
              }
            }
          });
          $('#reds').html(reds);
          $('#blues').html(blues);
          $('#greens').html(greens);
          if(reds == total) {
            alert("Hooray! You're such a champ. Keep it up.");
            location.reload();
          } else if(greens == 0) {
            alert("You're pretty bad at this game. This board was winnable.");
            location.reload();
          }
        }
      }
      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1) + min);
      }
      function solve(e) {
        e.preventDefault();
        str1 = $('form input[name="str1"]').val();
        str2 = $('form input[name="str2"]').val();
        str3 = $('form input[name="str3"]').val();
        str4 = $('form input[name="str4"]').val();
        str5 = $('form input[name="str5"]').val();
        str6 = $('form input[name="str6"]').val();
        str7 = $('form input[name="str7"]').val();
        str8 = $('form input[name="str8"]').val();
        mnd1 = $('form input[name="mnd1"]').val();
        mnd2 = $('form input[name="mnd2"]').val();
        mnd3 = $('form input[name="mnd3"]').val();
        mnd4 = $('form input[name="mnd4"]').val();
        mnd5 = $('form input[name="mnd5"]').val();
        mnd6 = $('form input[name="mnd6"]').val();
        mnd7 = $('form input[name="mnd7"]').val();
        mnd8 = $('form input[name="mnd8"]').val();
        tac1 = $('form input[name="tac1"]').val();
        tac2 = $('form input[name="tac2"]').val();
        tac3 = $('form input[name="tac3"]').val();
        tac4 = $('form input[name="tac4"]').val();
        tac5 = $('form input[name="tac5"]').val();
        tac6 = $('form input[name="tac6"]').val();
        tac7 = $('form input[name="tac7"]').val();
        tac8 = $('form input[name="tac8"]').val();
        $('#div-wrapper').append(str1)
        /*$('form').detach();
        for(var c = 0; c <= cols; c++) {
          $('#div-wrapper').append('<div class="control" id="c0-' + c + '"></div>');
          if(c != 0) {
            $('.control#c0-' + c).data({row: 0, col: c}).click(move);
          } else {
            $('.control#c0-0').css('visibility', 'hidden');
          }
        }
        $('#div-wrapper').append('<br>');
        for(var r = 1; r <= rows; r++) {
          $('#div-wrapper').append('<div class="control" id="c' + r + '-0"></div>');
          $('.control#c' + r + '-0').data({row: r, col: 0}).click(move);
          for(var c = 1; c <= cols; c++) {
            var strength = getRandomInt(-100, 100);
            $('#div-wrapper').append('<div id="' + r + '-' + c + '"></div>');
            $('#' + r + '-' + c).addClass('blue').text(strength).data({row: r, col: c, strength: strength}).click(move);
          }
          $('#div-wrapper').append('<div class="info" id="i' + r + '-0"></div>');
          $('#div-wrapper').append('<br>');
        }
        for(var c = 0; c <= cols; c++) {
          $('#div-wrapper').append('<div class="info" id="i0-' + c + '"></div>');
          if(c === 0) { $('.info#i0-0').css('visibility', 'hidden'); }
        }*/
      }
      $(document).ready(function() {
        $('button').click(solve);
      });
    </script>
  </body>
</html>